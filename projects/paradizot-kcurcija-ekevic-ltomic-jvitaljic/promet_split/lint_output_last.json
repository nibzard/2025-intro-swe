[{"filePath":"C:\\Users\\Lucija\\Desktop\\promet_split\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Lucija\\Desktop\\promet_split\\generateRoutes.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Lucija\\Desktop\\promet_split\\src\\App.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Lucija\\Desktop\\promet_split\\src\\ErrorBoundary.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Lucija\\Desktop\\promet_split\\src\\components\\Layout.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Lucija\\Desktop\\promet_split\\src\\components\\TicketCard.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Lucija\\Desktop\\promet_split\\src\\components\\mapa\\goggle_maps_mock\\BottomNav.jsx","messages":[{"ruleId":"no-unused-vars","severity":2,"message":"'Icon' is defined but never used. Allowed unused args must match /^_/u.","line":26,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"Icon"},"fix":{"range":[923,935],"text":""},"desc":"Remove unused variable 'Icon'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NavLink } from 'react-router-dom';\nimport { Wallet, Ticket, Map as MapIcon, User } from 'lucide-react';\n\nconst BottomNav = () => {\n    const navItems = [\n        { path: '/', icon: Wallet, label: 'Novčanik' },\n        { path: '/tickets', icon: Ticket, label: 'Karte' },\n        { path: '/map', icon: MapIcon, label: 'Bus' },\n        { path: '/profile', icon: User, label: 'Profil' },\n    ];\n\n    return (\n        <nav style={{\n            position: 'fixed',\n            bottom: 0,\n            left: 0,\n            right: 0,\n            backgroundColor: 'rgba(15, 23, 42, 0.85)',\n            backdropFilter: 'blur(12px)',\n            borderTop: '1px solid var(--color-border)',\n            display: 'grid',\n            gridTemplateColumns: 'repeat(4, 1fr)',\n            padding: '0.75rem 0 1.5rem 0', // Extra padding at bottom for iOS safe area\n            zIndex: 100\n        }}>\n            {navItems.map(({ path, icon: Icon, label }) => (\n                <NavLink\n                    key={path}\n                    to={path}\n                    style={({ isActive }) => ({\n                        display: 'flex',\n                        flexDirection: 'column',\n                        alignItems: 'center',\n                        textDecoration: 'none',\n                        color: isActive ? 'var(--color-primary)' : 'var(--color-text-muted)',\n                        gap: '0.35rem',\n                        fontSize: '0.7rem',\n                        fontWeight: isActive ? 600 : 500,\n                        transition: 'all 0.2s ease',\n                        transform: isActive ? 'translateY(-2px)' : 'none'\n                    })}\n                >\n                    {({ isActive }) => (\n                        <>\n                            <Icon size={24} strokeWidth={isActive ? 2.5 : 2} />\n                            <span>{label}</span>\n                        </>\n                    )}\n                </NavLink>\n            ))}\n        </nav>\n    );\n};\n\nexport default BottomNav;\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Lucija\\Desktop\\promet_split\\src\\components\\mapa\\goggle_maps_mock\\BusMap.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Lucija\\Desktop\\promet_split\\src\\components\\mapa\\goggle_maps_mock\\FleetTracker.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Lucija\\Desktop\\promet_split\\src\\context\\UserContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":195,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":195,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useContext, useState, useEffect } from 'react';\n\nconst UserContext = createContext();\n\nexport const UserProvider = ({ children }) => {\n    // Initialize state from localStorage if available\n    const [user, setUser] = useState(() => {\n        const saved = localStorage.getItem('user_data');\n        return saved ? JSON.parse(saved) : {\n            name: 'Ivan Horvat',\n            email: 'ivan.horvat@email.com',\n            balance: 15.50\n        };\n    });\n\n    const [notificationSettings, setNotificationSettings] = useState(() => {\n        const saved = localStorage.getItem('user_notification_settings');\n        return saved ? JSON.parse(saved) : {\n            transactions: true,\n            tickets: true,\n            promotions: false,\n            sound: true\n        };\n    });\n\n    const [transactions, setTransactions] = useState(() => {\n        const saved = localStorage.getItem('user_transactions');\n        return saved ? JSON.parse(saved) : [];\n    });\n\n    const [tickets, setTickets] = useState(() => {\n        const saved = localStorage.getItem('user_tickets');\n        return saved ? JSON.parse(saved) : [\n            // Initial mock tickets can go here if needed, or start empty?\n            // Let's keep the mock ones from Tickets.jsx roughly or just start empty/new.\n            // For now let's pre-populate with some \"old\" ones to show it works\n            { id: 1, type: '1 Sat', status: 'active', purchaseDate: new Date().toISOString() },\n            { id: 2, type: '24 Sata', status: 'not_activated', purchaseDate: new Date().toISOString() },\n        ];\n    });\n\n    const [paymentMethods, setPaymentMethods] = useState(() => {\n        const saved = localStorage.getItem('user_payment_methods');\n        return saved ? JSON.parse(saved) : [\n            { id: '1', type: 'card', name: 'Visa **** 1234', default: true },\n            { id: '2', type: 'google', name: 'Google Pay', default: false }\n        ];\n    });\n\n    const [stats] = useState(() => {\n        const saved = localStorage.getItem('user_stats');\n        return saved ? JSON.parse(saved) : {\n            rides: 42,\n            km: 156,\n            co2: 12.5 // kg\n        };\n    });\n\n    const [savedLocations, setSavedLocations] = useState(() => {\n        const saved = localStorage.getItem('user_saved_locations');\n        return saved ? JSON.parse(saved) : [\n            { id: 1, name: 'Kuća', address: 'Vukovarska 1' },\n            { id: 2, name: 'Posao', address: 'Domovinskog rata 2' }\n        ];\n    });\n\n    // Persist to localStorage whenever state changes\n    useEffect(() => {\n        localStorage.setItem('user_data', JSON.stringify(user));\n    }, [user]);\n\n    useEffect(() => {\n        localStorage.setItem('user_transactions', JSON.stringify(transactions));\n    }, [transactions]);\n\n    useEffect(() => {\n        localStorage.setItem('user_tickets', JSON.stringify(tickets));\n    }, [tickets]);\n\n    useEffect(() => {\n        localStorage.setItem('user_payment_methods', JSON.stringify(paymentMethods));\n    }, [paymentMethods]);\n\n    useEffect(() => {\n        localStorage.setItem('user_stats', JSON.stringify(stats));\n    }, [stats]);\n\n    useEffect(() => {\n        localStorage.setItem('user_saved_locations', JSON.stringify(savedLocations));\n    }, [savedLocations]);\n\n    useEffect(() => {\n        localStorage.setItem('user_notification_settings', JSON.stringify(notificationSettings));\n    }, [notificationSettings]);\n\n    // Actions\n    const updateUser = (updates) => {\n        setUser(prev => ({ ...prev, ...updates }));\n    };\n\n    const updateNotificationSettings = (key, value) => {\n        setNotificationSettings(prev => ({ ...prev, [key]: value }));\n    };\n\n    // Payment Method Actions\n    const addPaymentMethod = (method) => {\n        setPaymentMethods(prev => [...prev, { ...method, id: Date.now().toString() }]);\n    };\n\n    const removePaymentMethod = (id) => {\n        setPaymentMethods(prev => prev.filter(pm => pm.id !== id));\n    };\n\n    const setDefaultPaymentMethod = (id) => {\n        setPaymentMethods(prev => prev.map(pm => ({\n            ...pm,\n            default: pm.id === id\n        })));\n    };\n\n    const addTransaction = (transaction) => {\n        setTransactions(prev => [\n            { id: Date.now(), ...transaction },\n            ...prev\n        ]);\n    };\n\n    const addLocation = (location) => {\n        setSavedLocations(prev => [...prev, { ...location, id: Date.now() }]);\n    };\n\n    const removeLocation = (id) => {\n        setSavedLocations(prev => prev.filter(l => l.id !== id));\n    };\n    const addToBalance = (amount) => {\n        setUser(prev => ({ ...prev, balance: prev.balance + amount }));\n        addTransaction({\n            type: 'topup',\n            title: 'Nadoplata lisnice',\n            amount: amount,\n            date: new Date().toISOString(),\n            status: 'completed'\n        });\n    };\n\n    const subtractFromBalance = (amount) => {\n        setUser(prev => ({ ...prev, balance: prev.balance - amount }));\n    };\n\n\n\n    const addTicket = (ticket) => {\n        setTickets(prev => [ticket, ...prev]);\n        // Also record transaction\n        const durationInfo = ticket.duration ? `(${ticket.duration})` : '';\n        addTransaction({\n            type: 'purchase',\n            title: `Kupnja karte: ${ticket.type} ${durationInfo}`.trim(),\n            amount: -ticket.price, // Negative for spending\n            date: new Date().toISOString(),\n            status: 'completed'\n        });\n    };\n\n    return (\n        <UserContext.Provider value={{\n            user,\n            setUser,\n            transactions,\n            addTransaction,\n            tickets,\n            setTickets,\n            addTicket, // Helper that handles balance deduction? Or separate?\n            // Let's keep subtractFromBalance separate for better control in UI components\n            addToBalance,\n            subtractFromBalance,\n            paymentMethods,\n            setPaymentMethods,\n            addPaymentMethod,\n            removePaymentMethod,\n            setDefaultPaymentMethod,\n            updateUser,\n            notificationSettings,\n            updateNotificationSettings,\n            stats,\n            savedLocations,\n            addLocation,\n            removeLocation\n        }}>\n            {children}\n        </UserContext.Provider>\n    );\n};\n\nexport const useUser = () => {\n    const context = useContext(UserContext);\n    if (!context) {\n        throw new Error('useUser must be used within a UserProvider');\n    }\n    return context;\n};\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Lucija\\Desktop\\promet_split\\src\\context\\WalletContext.jsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":101,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":101,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useContext, useState, useEffect } from 'react';\r\n\r\nconst WalletContext = createContext();\r\n\r\nexport const WalletProvider = ({ children }) => {\r\n    const [balance, setBalance] = useState(0);\r\n    const [tickets, setTickets] = useState([]);\r\n\r\n    const addToBalance = (amount) => {\r\n        setBalance((prev) => prev + amount);\r\n    };\r\n\r\n    const subtractFromBalance = (amount) => {\r\n        setBalance((prev) => prev - amount);\r\n    };\r\n\r\n    const buyTicket = (ticketTemplate) => {\r\n        const newTicket = {\r\n            ...ticketTemplate,\r\n            id: Date.now().toString() + Math.random().toString(36).substr(2, 9), // Ensure uniqueness even if fast\r\n            status: 'not_activated',\r\n            purchasedAt: new Date().toISOString(),\r\n        };\r\n        setTickets((prev) => [newTicket, ...prev]);\r\n        subtractFromBalance(ticketTemplate.price);\r\n    };\r\n\r\n    const activateTicket = (ticketId) => {\r\n        setTickets((prev) => {\r\n            // Check if any ticket is already active\r\n            const hasActive = prev.some(t => t.status === 'active');\r\n            if (hasActive) {\r\n                // If checking here, we can't easily alert the user without returning status.\r\n                // However, the prompt asked to \"correct the code so user cannot have more than one active\".\r\n                // We'll enforce it here, preventing the state update for the target ticket if one exists.\r\n                // But this fails silently from UI perspective if we don't handle it in UI. \r\n                // Let's assume we handle the alert in UI, but this is a safety guard.\r\n                // Actually, let's just implement the logic to NOT activate if hasActive is true? \r\n                // But the map below is the update logic.\r\n                // We can't nicely return early from setTickets update function to cancel completely \r\n                // (returning 'prev' works but consumes the update).\r\n                return prev;\r\n            }\r\n\r\n            return prev.map(ticket => {\r\n                if (ticket.id === ticketId) {\r\n                    // Start activation...\r\n                    // Double check (redundant but safe) logic inside map not needed if we return prev above.\r\n\r\n                    // Parse duration...\r\n                    let durationMinutes = 60;\r\n                    if (ticket.type === '24 Sata') durationMinutes = 1440;\r\n\r\n                    const now = new Date();\r\n                    const expiresAt = new Date(now.getTime() + durationMinutes * 60000);\r\n\r\n                    return {\r\n                        ...ticket,\r\n                        status: 'active',\r\n                        activatedAt: now.toISOString(),\r\n                        expiresAt: expiresAt.toISOString()\r\n                    };\r\n                }\r\n                return ticket;\r\n            });\r\n        });\r\n    };\r\n\r\n    const deactivateTicket = (ticketId) => {\r\n        setTickets((prev) => prev.map(ticket => {\r\n            if (ticket.id === ticketId) {\r\n                return { ...ticket, status: 'expired' };\r\n            }\r\n            return ticket;\r\n        }));\r\n    };\r\n\r\n    // Check for expired tickets\r\n    useEffect(() => {\r\n        const interval = setInterval(() => {\r\n            setTickets((prev) => prev.map(ticket => {\r\n                if (ticket.status === 'active' && ticket.expiresAt) {\r\n                    if (new Date() > new Date(ticket.expiresAt)) {\r\n                        return { ...ticket, status: 'expired' };\r\n                    }\r\n                }\r\n                return ticket;\r\n            }));\r\n        }, 1000); // Check every second for immediate feedback in demo\r\n\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    return (\r\n        <WalletContext.Provider value={{ balance, tickets, addToBalance, subtractFromBalance, buyTicket, activateTicket, deactivateTicket }}>\r\n            {children}\r\n        </WalletContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useWallet = () => {\r\n    const context = useContext(WalletContext);\r\n    if (!context) {\r\n        throw new Error('useWallet must be used within a WalletProvider');\r\n    }\r\n    return context;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Lucija\\Desktop\\promet_split\\src\\main.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Lucija\\Desktop\\promet_split\\src\\pages\\Map.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Lucija\\Desktop\\promet_split\\src\\pages\\Profile.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Lucija\\Desktop\\promet_split\\src\\pages\\Tickets.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Lucija\\Desktop\\promet_split\\src\\pages\\Wallet.jsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\Lucija\\Desktop\\promet_split\\vite.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
