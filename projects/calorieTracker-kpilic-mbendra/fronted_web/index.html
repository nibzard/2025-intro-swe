<!DOCTYPE html>
<html lang="hr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalorijski Dnevnik</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    
    <div id="auth-overlay" class="modal-overlay">
        <div class="modal-content auth-box">
            <h2>DobrodoÅ¡li</h2>
            <p style="color: #888; margin-bottom: 20px;">Prijavite se za pristup dnevniku</p>
            <form id="auth-form">
                <input type="email" id="auth-email" placeholder="E-mail adresa" required>
                <input type="password" id="auth-password" placeholder="Lozinka" required>
                <div id="auth-buttons" style="display: flex; gap: 10px; margin-top: 15px;">
                    <button type="button" id="login-btn">Prijava</button>
                    <button type="button" id="register-btn" class="secondary-btn">Registracija</button>
                </div>
                <p style="text-align: center; margin-top: 15px; font-size: 0.85em;">
                    <a href="#" id="forgot-password-link" style="color: #7c3aed; text-decoration: none;">Zaboravili ste lozinku?</a>
                </p>
            </form>
        </div>
    </div>

    <div id="app-container" style="display: none;">
        
        <button id="logout-btn" style="width: auto; position: absolute; top: 20px; right: 20px; background: #333; padding: 8px 15px; border-radius: 5px; color: white; border: none; cursor: pointer;">Odjavi se</button>

        <h1>Kalorijski Dnevnik</h1>

        <div id="phase-1-profile" class="card">
            <h3>VaÅ¡ Profil</h3>
            <div class="input-group">
                <input type="number" id="user-age" placeholder="Godine">
                <input type="number" id="user-weight" placeholder="TeÅ¾ina (kg)">
                <input type="number" id="user-height" placeholder="Visina (cm)">
                <input type="number" id="target-weight" placeholder="Ciljana teÅ¾ina (kg)">
                <select id="user-activity">
                    <option value="sedentary">SjedilaÄki (bez vjeÅ¾banja)</option>
                    <option value="lightly_active">Lagano (1-3 dana/tjedno)</option>
                    <option value="moderately_active">Umjereno (3-5 dana/tjedno)</option>
                    <option value="very_active">Vrlo aktivno (6-7 dana/tjedno)</option>
                </select>
                <button id="calculate-tdee-btn" class="primary-btn">IzraÄunaj plan prehrane</button>
            </div>
            <hr>
            <p style="text-align: center; margin: 10px 0;">ILI</p>
            <div class="input-group">
                <input type="number" id="daily-goal" placeholder="RuÄni unos kalorija (kcal)">
                <button id="set-manual-goal-btn" class="secondary-btn">Postavi cilj</button>
            </div>
        </div>

        <div id="phase-2-diary" class="diary-grid" style="display: none;">
        
            <div class="diary-controls">
                <div class="card">
                    <h4>Dodaj obrok tekstom</h4>
                    <input type="text" id="meal-name" placeholder="Å to ste jeli? (npr. Pizza)">
                    <input type="number" id="grams" placeholder="Grami (g)">
                    <select id="text-meal-category">
                        <option>DoruÄak</option>
                        <option>RuÄak</option>
                        <option>VeÄera</option>
                        <option>UÅ¾ina</option>
                    </select>
                    <button id="add-meal-btn" class="primary-btn">Dodaj</button>
                </div>

                <div class="card">
                    <h4>Analiziraj sliku obroka</h4>
                    <input type="file" id="meal-image-file" accept="image/*">
                    <select id="image-meal-category">
                        <option>DoruÄak</option>
                        <option>RuÄak</option>
                        <option>VeÄera</option>
                        <option>UÅ¾ina</option>
                    </select>
                    <button id="analyze-btn" class="secondary-btn">Skeniraj AI-jem</button>
                    <div id="loading-spinner" style="display: none; color: #22c55e; margin-top: 10px;">
                    <i class="fas fa-spinner fa-spin"></i> Analiziram sliku...
                    </div>
                </div>
                <div class="date-picker">
                    <input type="date" id="date-picker" onchange="loadUserMeals()">
                </div>
                <button onclick="obrisiSveZaDanas()" style="background-color: #ff4444; color: white;">
                        ğŸ—‘ï¸ Isprazni cijeli dan
                </button>
                
                <button id="back-to-profile-btn" style="background:none; color:#888; border:none; cursor:pointer;">â† Promijeni cilj</button>
            </div>

            <div class="diary-view">
                <div class="stats-bar card">
                    <div class="calorie-progress-container">
            <div class="calorie-circle">
                <div class="inner-circle">
                    <span id="calories-left-number">0</span>
                    <small>kcal preostalo</small>
                </div>
            </div>
        </div>
<div class="macros-stats-container" style="margin-top: 30px; border-top: 1px solid #334155; pt: 20px;">
    <h4 style="text-align: center; color: #94a3b8; margin-bottom: 15px;">Balans Nutrijenata</h4>
    
    <div id="macros-circle" class="macros-circle">
        <div class="inner-circle-macros">
            <div style="text-align: center;">
                <span id="total-macros-weight" style="font-size: 1.5rem; font-weight: 800; color: #fff;">0</span>
                <small style="display: block; color: #64748b;">KCAL UNESENO</small>
            </div>
        </div>
    </div>

    <div class="macros-legend">
        <div class="leg-item">
            <span class="dot p-color"></span> 
            <span>P: <strong id="p-val-leg">0</strong>g</span>
        </div>
        <div class="leg-item">
            <span class="dot c-color"></span> 
            <span>U: <strong id="c-val-leg">0</strong>g</span>
        </div>
        <div class="leg-item">
            <span class="dot f-color"></span> 
            <span>M: <strong id="f-val-leg">0</strong>g</span>
        </div>
    </div>
</div>
                    
<div class="meal-logs">
    <div class="log-section">
        <h5>ğŸŒ… DoruÄak</h5>
        <ul id="log-DoruÄak"></ul>
    </div>
    <div class="log-section">
        <h5>â˜€ï¸ RuÄak</h5>
        <ul id="log-RuÄak"></ul>
    </div>
    <div class="log-section">
        <h5>ğŸŒ™ VeÄera</h5>
            <ul id="log-VeÄera"></ul>
    </div>
    <div class="log-section">
        <h5>ğŸŒ… UÅ¾ina</h5>
        <ul id="log-UÅ¾ina"></ul>
    </div>
</div>
</div>

</div>
</div>
<div id="toast" class="toast">Obrok uspjeÅ¡no obrisan!</div>

    <script src="script.js"></script>
</body>
</html>